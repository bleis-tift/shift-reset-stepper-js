(function(r){function t(t){for(var e,i,c=t[0],o=t[1],s=t[2],l=0,p=[];l<c.length;l++)i=c[l],u[i]&&p.push(u[i][0]),u[i]=0;for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(r[e]=o[e]);f&&f(t);while(p.length)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var r,t=0;t<a.length;t++){for(var n=a[t],e=!0,c=1;c<n.length;c++){var o=n[c];0!==u[o]&&(e=!1)}e&&(a.splice(t--,1),r=i(i.s=n[0]))}return r}var e={},u={app:0},a=[];function i(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return r[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=r,i.c=e,i.d=function(r,t,n){i.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:n})},i.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,t){if(1&t&&(r=i(r)),8&t)return r;if(4&t&&"object"===typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var e in r)i.d(n,e,function(t){return r[t]}.bind(null,e));return n},i.n=function(r){var t=r&&r.__esModule?function(){return r["default"]}:function(){return r};return i.d(t,"a",t),t},i.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},i.p="/shift-reset-stepper-js/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var f=o;a.push([0,"chunk-vendors"]),n()})({0:function(r,t,n){r.exports=n("56d7")},"034f":function(r,t,n){"use strict";var e=n("64a9"),u=n.n(e);u.a},"56d7":function(r,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var e=n("2b0e"),u=function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("div",{attrs:{id:"app"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:r.program,expression:"program"}],domProps:{value:r.program},on:{input:function(t){t.target.composing||(r.program=t.target.value)}}}),n("br"),n("input",{attrs:{type:"button",value:"parse"},on:{click:r.parse}}),n("p",[r._v(r._s(r.error))]),n("pre",[r._v(r._s(r.code))]),n("ol",r._l(r.steps,function(t,e){return n("li",{key:e},[r._v("\n      "+r._s(r.printExpr(t))+"\n    ")])}),0),n("input",{attrs:{type:"button",value:"reduce"},on:{click:r.reduce}})])},a=[],i=n("d225"),c=n("e814"),o=n.n(c),s=n("5d73"),f=n.n(s);n("55dd"),n("a481"),n("6b54");function l(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function p(r,t,n,e){this.message=r,this.expected=t,this.found=n,this.location=e,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,p)}function h(r,t){t=void 0!==t?t:{};var n,e={},u={start:Tr},a=Tr,c=";;",s=_r(";;",!1),l=function(r,t){return new et(r,t)},h=Er("ident"),d="_",v=_r("_",!1),y=function(){return tt},g="let",b=_r("let",!1),w="fun",m=_r("fun",!1),x="true",A=_r("true",!1),j="false",_=_r("false",!1),O=/^[a-zA-Z]/,C=Or([["a","z"],["A","Z"]],!1,!1),k=/^[a-zA-Z0-9_]/,E=Or([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),S="'",F=_r("'",!1),P=function(r,t,n){return r+t.join("")+n.join("")},M=Er("simple-pat"),T=function(r){return r},z="=",R=_r("=",!1),Z=function(r,t,n){var e=[],u=!0,a=!1,i=void 0;try{for(var c,o=f()(t);!(u=(c=o.next()).done);u=!0){var s=c.value;e.push(s[1])}}catch(l){a=!0,i=l}finally{try{u||null==o.return||o.return()}finally{if(a)throw i}}return new Xr(r,e,n)},J=/^[\-+]/,$=Or(["-","+"],!1,!1),N=function(r,t,n){return new Yr(t,[r,n])},U=/^[*\/]/,q=Or(["*","/"],!1,!1),B=function(r,t){var n=[],e=!0,u=!1,a=void 0;try{for(var i,c=f()(t);!(e=(i=c.next()).done);e=!0){var o=i.value;n.push(o[1])}}catch(s){u=!0,a=s}finally{try{e||null==c.return||c.return()}finally{if(u)throw a}}return new Yr(r,n)},D="(",G=_r("(",!1),H=")",I=_r(")",!1),K=function(r){return r},L="->",Q=_r("->",!1),V=function(r,t){var n=[],e=!0,u=!1,a=void 0;try{for(var i,c=f()(r);!(e=(i=c.next()).done);e=!0){var o=i.value;n.push(o[1])}}catch(s){u=!0,a=s}finally{try{e||null==c.return||c.return()}finally{if(u)throw a}}return new rt(n,t)},W=Er("unit-lit"),X=function(){return nt},Y=Er("bool-lit"),rr=function(){return!0},tr=function(){return!1},nr=Er("int-lit"),er="0",ur=_r("0",!1),ar=function(){return 0},ir="-",cr=_r("-",!1),or=/^[1-9]/,sr=Or([["1","9"]],!1,!1),fr=/^[0-9]/,lr=Or([["0","9"]],!1,!1),pr=function(r){return o()(r.join(""),10)},hr=Er("optional-ws"),dr=Er("ws"),vr=/^[ \t\r\n]/,yr=Or([" ","\t","\r","\n"],!1,!1),gr=Er("eof"),br=Cr(),wr=0,mr=[{line:1,column:1}],xr=0,Ar=[],jr=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=u[t.startRule]}function _r(r,t){return{type:"literal",text:r,ignoreCase:t}}function Or(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function Cr(){return{type:"any"}}function kr(){return{type:"end"}}function Er(r){return{type:"other",description:r}}function Sr(t){var n,e=mr[t];if(e)return e;n=t-1;while(!mr[n])n--;e=mr[n],e={line:e.line,column:e.column};while(n<t)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return mr[t]=e,e}function Fr(r,t){var n=Sr(r),e=Sr(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function Pr(r){wr<xr||(wr>xr&&(xr=wr,Ar=[]),Ar.push(r))}function Mr(r,t,n){return new p(p.buildMessage(r,t),r,t,n)}function Tr(){var r;return r=zr(),r}function zr(){var t,n,u,a,i,o,f;t=wr,n=[],u=Jr();while(u!==e)n.push(u),u=Jr();return n!==e?(u=Nr(),u!==e?(a=Lr(),a!==e?(r.substr(wr,2)===c?(i=c,wr+=2):(i=e,0===jr&&Pr(s)),i!==e?(o=Lr(),o!==e?(f=Wr(),f!==e?(t,n=l(n,u),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e),t}function Rr(){var t,n,u,a,i;if(jr++,t=wr,95===r.charCodeAt(wr)?(n=d,wr++):(n=e,0===jr&&Pr(v)),n!==e&&(t,n=y()),t=n,t===e&&(t=wr,jr++,r.substr(wr,3)===g?(n=g,wr+=3):(n=e,0===jr&&Pr(b)),jr--,n!==e?(wr=t,t=void 0):t=e,t===e&&(t=wr,jr++,r.substr(wr,3)===w?(n=w,wr+=3):(n=e,0===jr&&Pr(m)),jr--,n!==e?(wr=t,t=void 0):t=e,t===e&&(t=wr,jr++,r.substr(wr,4)===x?(n=x,wr+=4):(n=e,0===jr&&Pr(A)),jr--,n!==e?(wr=t,t=void 0):t=e,t===e&&(t=wr,jr++,r.substr(wr,5)===j?(n=j,wr+=5):(n=e,0===jr&&Pr(_)),jr--,n!==e?(wr=t,t=void 0):t=e,t===e)))))if(t=wr,O.test(r.charAt(wr))?(n=r.charAt(wr),wr++):(n=e,0===jr&&Pr(C)),n!==e){u=[],k.test(r.charAt(wr))?(a=r.charAt(wr),wr++):(a=e,0===jr&&Pr(E));while(a!==e)u.push(a),k.test(r.charAt(wr))?(a=r.charAt(wr),wr++):(a=e,0===jr&&Pr(E));if(u!==e){a=[],39===r.charCodeAt(wr)?(i=S,wr++):(i=e,0===jr&&Pr(F));while(i!==e)a.push(i),39===r.charCodeAt(wr)?(i=S,wr++):(i=e,0===jr&&Pr(F));a!==e?(t,n=P(n,u,a),t=n):(wr=t,t=e)}else wr=t,t=e}else wr=t,t=e;return jr--,t===e&&(n=e,0===jr&&Pr(h)),t}function Zr(){var r;return jr++,r=Hr(),r===e&&(r=Rr()),jr--,r===e&&(e,0===jr&&Pr(M)),r}function Jr(){var t,n,u,a,i;return t=wr,n=$r(),n!==e?(u=Lr(),u!==e?(r.substr(wr,2)===c?(a=c,wr+=2):(a=e,0===jr&&Pr(s)),a!==e?(i=Lr(),i!==e?(t,n=T(n),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e),t}function $r(){var t,n,u,a,i,c,o,s,f;if(t=wr,r.substr(wr,3)===g?(n=g,wr+=3):(n=e,0===jr&&Pr(b)),n!==e)if(u=Qr(),u!==e)if(a=Rr(),a!==e){if(i=[],c=wr,o=Qr(),o!==e?(s=Zr(),s!==e?(o=[o,s],c=o):(wr=c,c=e)):(wr=c,c=e),c!==e)while(c!==e)i.push(c),c=wr,o=Qr(),o!==e?(s=Zr(),s!==e?(o=[o,s],c=o):(wr=c,c=e)):(wr=c,c=e);else i=e;i!==e?(c=Lr(),c!==e?(61===r.charCodeAt(wr)?(o=z,wr++):(o=e,0===jr&&Pr(R)),o!==e?(s=Lr(),s!==e?(f=Nr(),f!==e?(t,n=Z(a,i,f),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)}else wr=t,t=e;else wr=t,t=e;else wr=t,t=e;return t}function Nr(){var t,n,u,a,i,c;return t=wr,n=Ur(),n!==e?(u=Lr(),u!==e?(J.test(r.charAt(wr))?(a=r.charAt(wr),wr++):(a=e,0===jr&&Pr($)),a!==e?(i=Lr(),i!==e?(c=Nr(),c!==e?(t,n=N(n,a,c),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e),t===e&&(t=Ur()),t}function Ur(){var t,n,u,a,i,c;return t=wr,n=qr(),n!==e?(u=Lr(),u!==e?(U.test(r.charAt(wr))?(a=r.charAt(wr),wr++):(a=e,0===jr&&Pr(q)),a!==e?(i=Lr(),i!==e?(c=Ur(),c!==e?(t,n=N(n,a,c),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e),t===e&&(t=qr()),t}function qr(){var r,t,n,u,a,i;if(r=wr,t=Br(),t!==e){if(n=[],u=wr,a=Qr(),a!==e?(i=Br(),i!==e?(a=[a,i],u=a):(wr=u,u=e)):(wr=u,u=e),u!==e)while(u!==e)n.push(u),u=wr,a=Qr(),a!==e?(i=Br(),i!==e?(a=[a,i],u=a):(wr=u,u=e)):(wr=u,u=e);else n=e;n!==e?(r,t=B(t,n),r=t):(wr=r,r=e)}else wr=r,r=e;return r===e&&(r=Br()),r}function Br(){var t,n,u,a,i,c;return t=wr,40===r.charCodeAt(wr)?(n=D,wr++):(n=e,0===jr&&Pr(G)),n!==e?(u=Lr(),u!==e?(a=Nr(),a!==e?(i=Lr(),i!==e?(41===r.charCodeAt(wr)?(c=H,wr++):(c=e,0===jr&&Pr(I)),c!==e?(t,n=K(a),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e),t===e&&(t=Dr()),t}function Dr(){var r;return r=Hr(),r===e&&(r=Ir(),r===e&&(r=Kr(),r===e&&(r=Gr(),r===e&&(r=Rr())))),r}function Gr(){var t,n,u,a,i,c,o;if(t=wr,r.substr(wr,3)===w?(n=w,wr+=3):(n=e,0===jr&&Pr(m)),n!==e){if(u=[],a=wr,i=Qr(),i!==e?(c=Zr(),c!==e?(i=[i,c],a=i):(wr=a,a=e)):(wr=a,a=e),a!==e)while(a!==e)u.push(a),a=wr,i=Qr(),i!==e?(c=Zr(),c!==e?(i=[i,c],a=i):(wr=a,a=e)):(wr=a,a=e);else u=e;u!==e?(a=Lr(),a!==e?(r.substr(wr,2)===L?(i=L,wr+=2):(i=e,0===jr&&Pr(Q)),i!==e?(c=Lr(),c!==e?(o=Nr(),o!==e?(t,n=V(u,o),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e)}else wr=t,t=e;return t}function Hr(){var t,n,u,a;return jr++,t=wr,40===r.charCodeAt(wr)?(n=D,wr++):(n=e,0===jr&&Pr(G)),n!==e?(u=Lr(),u!==e?(41===r.charCodeAt(wr)?(a=H,wr++):(a=e,0===jr&&Pr(I)),a!==e?(t,n=X(),t=n):(wr=t,t=e)):(wr=t,t=e)):(wr=t,t=e),jr--,t===e&&(n=e,0===jr&&Pr(W)),t}function Ir(){var t,n;return jr++,t=wr,r.substr(wr,4)===x?(n=x,wr+=4):(n=e,0===jr&&Pr(A)),n!==e&&(t,n=rr()),t=n,t===e&&(t=wr,r.substr(wr,5)===j?(n=j,wr+=5):(n=e,0===jr&&Pr(_)),n!==e&&(t,n=tr()),t=n),jr--,t===e&&(n=e,0===jr&&Pr(Y)),t}function Kr(){var t,n,u,a,i,c;if(jr++,t=wr,48===r.charCodeAt(wr)?(n=er,wr++):(n=e,0===jr&&Pr(ur)),n!==e&&(t,n=ar()),t=n,t===e){if(t=wr,n=wr,45===r.charCodeAt(wr)?(u=ir,wr++):(u=e,0===jr&&Pr(cr)),u===e&&(u=null),u!==e)if(or.test(r.charAt(wr))?(a=r.charAt(wr),wr++):(a=e,0===jr&&Pr(sr)),a!==e){i=[],fr.test(r.charAt(wr))?(c=r.charAt(wr),wr++):(c=e,0===jr&&Pr(lr));while(c!==e)i.push(c),fr.test(r.charAt(wr))?(c=r.charAt(wr),wr++):(c=e,0===jr&&Pr(lr));i!==e?(u=[u,a,i],n=u):(wr=n,n=e)}else wr=n,n=e;else wr=n,n=e;n!==e&&(t,n=pr(n)),t=n}return jr--,t===e&&(n=e,0===jr&&Pr(nr)),t}function Lr(){var r,t;jr++,r=[],t=Vr();while(t!==e)r.push(t),t=Vr();return jr--,r===e&&(t=e,0===jr&&Pr(hr)),r}function Qr(){var r,t;if(jr++,r=[],t=Vr(),t!==e)while(t!==e)r.push(t),t=Vr();else r=e;return jr--,r===e&&(t=e,0===jr&&Pr(dr)),r}function Vr(){var t;return vr.test(r.charAt(wr))?(t=r.charAt(wr),wr++):(t=e,0===jr&&Pr(yr)),t}function Wr(){var t,n;return jr++,t=wr,jr++,r.length>wr?(n=r.charAt(wr),wr++):(n=e,0===jr&&Pr(br)),jr--,n===e?t=void 0:(wr=t,t=e),jr--,t===e&&(n=e,0===jr&&Pr(gr)),t}var Xr=function r(t,n,e){Object(i["a"])(this,r),this.type="function-definition",this.ident=t,this.params=n,this.body=e},Yr=function r(t,n){Object(i["a"])(this,r),this.type="function-application",this.f=t,this.args=n},rt=function r(t,n){Object(i["a"])(this,r),this.type="lambda-expr",this.params=t,this.body=n},tt="ast-wildcard",nt="ast-unit",et=function r(t,n){Object(i["a"])(this,r),this.type="program",this.defs=t,this.expr=n};if(n=a(),n!==e&&wr===r.length)return n;throw n!==e&&wr<r.length&&Pr(kr()),Mr(Ar,xr<r.length?r.charAt(xr):null,xr<r.length?Fr(xr,xr+1):Fr(xr,xr))}function d(r,t){return h(r,t)}function v(r){r.expr;var t=[],n=!0,e=!1,u=void 0;try{for(var a,i=f()(r.defs);!(n=(a=i.next()).done);n=!0){var c=a.value;t.push(y(c))}}catch(o){e=!0,u=o}finally{try{n||null==i.return||i.return()}finally{if(e)throw u}}return t.push(g(r.expr)),t.join(";;\n\n")}function y(r){return"let "+r.ident+" "+w(r.params)+" =\n  "+g(r.body)}function g(r){switch(r.type){case"function-application":switch(r.f){case"+":case"-":case"*":case"/":return g(r.args[0])+" "+r.f+" "+g(r.args[1]);default:return r.f?r.f.type?"("+g(r.f)+") "+m(r.args):g(r.f)+" "+m(r.args):"oops!"}case"lambda-expr":return"fun "+w(r.params)+" -> "+g(r.body);case void 0:switch(r){case"ast-unit":return"()";case"ast-wildcard":return"_";default:return r+""}}throw new Error("unsupported type: "+r.type)}function b(r){switch(r){case"ast-unit":return"()";case"ast-wildcard":return"_";default:return r}}function w(r){var t=[],n=!0,e=!1,u=void 0;try{for(var a,i=f()(r);!(n=(a=i.next()).done);n=!0){var c=a.value;t.push(b(c))}}catch(o){e=!0,u=o}finally{try{n||null==i.return||i.return()}finally{if(e)throw u}}return t.join(" ")}function m(r){var t=[],n=!0,e=!1,u=void 0;try{for(var a,i=f()(r);!(n=(a=i.next()).done);n=!0){var c=a.value;switch(c.type){case"lambda-expr":case"function-application":t.push("("+g(c)+")");break;default:t.push(g(c));break}}}catch(o){e=!0,u=o}finally{try{n||null==i.return||i.return()}finally{if(e)throw u}}return t.join(" ")}l(p,Error),p.buildMessage=function(r,t){var n={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,n="";for(t=0;t<r.parts.length;t++)n+=r.parts[t]instanceof Array?a(r.parts[t][0])+"-"+a(r.parts[t][1]):a(r.parts[t]);return"["+(r.inverted?"^":"")+n+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function a(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function i(r){return n[r.type](r)}function c(r){var t,n,e=new Array(r.length);for(t=0;t<r.length;t++)e[t]=i(r[t]);if(e.sort(),e.length>0){for(t=1,n=1;t<e.length;t++)e[t-1]!==e[t]&&(e[n]=e[t],n++);e.length=n}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}function o(r){return r?'"'+u(r)+'"':"end of input"}return"Expected "+c(r)+" but "+o(t)+" found."};var x=n("f499"),A=n.n(x),j=n("768b"),_=(n("ac6a"),n("ab8c")),O=n.n(_),C=n("2d7d"),k=n.n(C),E=n("01c8"),S=n("75fc"),F=n("b0b4");function P(){return"ast-unit"}function M(r,t){return{type:"lambda-expr",params:r,body:t}}function T(r,t){return{type:"function-application",f:r,args:t}}var z=0;function R(){return"v"+z++}var Z=function(){function r(){Object(i["a"])(this,r),this.outer=function(r){return r},this.current=function(r){return r}}return Object(F["a"])(r,[{key:"clone",value:function(){var t=new r;return t.outer=this.outer,t.current=this.current,t}}]),r}();function J(r,t){z=0;var n=U(r,t,new Z),e=n.outer(n.current(null));return e}function $(r){return void 0===r.type||"lambda-expr"===r.type}function N(r){switch(r){case"+":case"-":case"*":case"/":return!0;default:return"lambda-expr"===r.type}}function U(r,t,n){if(!t.type)return n.current=function(r){return t},n;switch(t.type){case"function-application":switch(t.f){case"reset":var e=q(t.args);if(-1===e||0===e)return B(r,t.args[0].body,t.args.slice(1),n);var u=n.current;return n.current=function(r){var n=t.args.map(function(r){return r});return n[e]=r,u(T(t.f,n))},U(r,t.args[e],n);case"shift":return D(r,t.args[0],n);default:var a=q(t.args);if(-1===a){if(N(t.f))return G(r,t.f,t.args,n);if("function-application"===t.f.type){var i=U(r,t.f,n.clone());return n.current=function(r){return T(i.outer(i.current(r)),t.args)},n}return H(r,t.f,t.args,n)}var c=n.current;return n.current=function(r){var n=t.args.map(function(r){return r});return n[a]=r,c(T(t.f,n))},U(r,t.args[a],n)}case"lambda-expr":return n.current=function(r){return t},n;default:throw new Error("not implemented yet.")}}function q(r){for(var t=r.length-1;t>=0;t--)if(!$(r[t]))return t;return-1}function B(r,t,n,e){if(!$(t)){var u=e.clone(),a=U(r,t,new Z);return e.current=function(r){return a.outer(a.current(r))},e.outer=function(r){return u.outer(u.current(T("reset",[M([P()],r)].concat(Object(S["a"])(n)))))},e}var i=e.current(t);switch(i.type){case"lambda-expr":return 0!==n.length?e.current=function(r){return T(i,n)}:e.current=function(r){return i},e;default:return e.current=function(r){return i},e}}function D(r,t,n){var e=R(),u=T(t,[M([e],T("reset",[M([P()],n.current(e))]))]);return n.current=function(r){return u},n}function G(r,t,n,e){switch(t){case"+":var u=e.current(n[0]+n[1]);return e.current=function(r){return u},e;case"-":var a=e.current(n[0]-n[1]);return e.current=function(r){return a},e;case"*":var i=e.current(n[0]*n[1]);return e.current=function(r){return i},e;case"/":var c=e.current(n[0]/n[1]);return e.current=function(r){return c},e;default:if(1==t.params.length){var o=K(t.body,t.params[0],n[0]),s=e.current(o);return 1!=n.length?e.current=function(r){return T(s,n.slice(1))}:e.current=function(r){return s},e}var f=Object(E["a"])(t.params),l=f[0],p=f.slice(1),h=Object(E["a"])(n),d=h[0],v=h.slice(1),y=M([l],T(M(p,t.body),v));return G(r,y,[d],e)}}function H(r,t,n,e){var u=new k.a,a=!0,i=!1,c=void 0;try{for(var o,s=f()(r);!(a=(o=s.next()).done);a=!0){var l=o.value;u.set(l.ident,l)}}catch(y){i=!0,c=y}finally{try{a||null==s.return||s.return()}finally{if(i)throw c}}for(var p=u.get(t),h=p.params.map(function(r){return r}),d=0;d<h.length;d++)u.set(p.params[d],h[d]);var v=e.current(T(M(h,p.body),n));return e.current=function(r){return v},e}function I(r){return"number"===typeof r&&O()(r)}function K(r,t,n){var e=new k.a([[t,n]]);return L(e,r)}function L(r,t){if(I(t))return t;var n=r.get(t);if(void 0!==n)return n;if(!t.type)return t;switch(t.type){case"function-application":var e=t.args.map(function(t){return L(Q(r),t)}),u=L(Q(r),t.f);return T(u,e);case"lambda-expr":var a=Q(r),i=!0,c=!1,o=void 0;try{for(var s,l=f()(t.params);!(i=(s=l.next()).done);i=!0){var p=s.value;a.delete(p)}}catch(d){c=!0,o=d}finally{try{i||null==l.return||l.return()}finally{if(c)throw o}}var h=L(a,t.body);return M(t.params,h)}throw new Error("not implemented yet. expr="+g(t)+", varTable="+V(r))}function Q(r){return new k.a(Object(S["a"])(r.entries()))}function V(r){return"{"+Object(S["a"])(r.entries()).map(function(r){var t=Object(j["a"])(r,2),n=t[0],e=t[1];return n+":"+A()(e)}).join(", ")+"}"}var W={name:"app",components:{},data:function(){return{program:"let get () = shift (fun k -> fun state -> k state state);;\nlet return result = fun _ -> result;;\nlet run_state thunk init = reset (fun () -> return (thunk ())) init;;\nrun_state (fun () -> get () + get ()) 3;;",error:"",code:"",steps:[],parsed:""}},methods:{parse:function(){if(this.program)try{this.error="",this.parsed=d(this.program,{}),this.code=v(this.parsed),this.steps=[this.parsed.expr]}catch(r){this.error=r,this.parsed="",this.code="",this.steps=[]}},reduce:function(){if(0!=this.steps.length){var r=this.steps[this.steps.length-1],t=J(this.parsed.defs,r);this.steps.push(t)}},printExpr:function(r){return g(r)}}},X=W,Y=(n("034f"),n("2877")),rr=Object(Y["a"])(X,u,a,!1,null,null,null),tr=rr.exports;e["a"].config.productionTip=!1,new e["a"]({render:function(r){return r(tr)}}).$mount("#app")},"64a9":function(r,t,n){}});
//# sourceMappingURL=app.adea7b07.js.map