(function(r){function t(t){for(var e,i,c=t[0],o=t[1],s=t[2],l=0,p=[];l<c.length;l++)i=c[l],u[i]&&p.push(u[i][0]),u[i]=0;for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(r[e]=o[e]);f&&f(t);while(p.length)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var r,t=0;t<a.length;t++){for(var n=a[t],e=!0,c=1;c<n.length;c++){var o=n[c];0!==u[o]&&(e=!1)}e&&(a.splice(t--,1),r=i(i.s=n[0]))}return r}var e={},u={app:0},a=[];function i(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return r[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=r,i.c=e,i.d=function(r,t,n){i.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:n})},i.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,t){if(1&t&&(r=i(r)),8&t)return r;if(4&t&&"object"===typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var e in r)i.d(n,e,function(t){return r[t]}.bind(null,e));return n},i.n=function(r){var t=r&&r.__esModule?function(){return r["default"]}:function(){return r};return i.d(t,"a",t),t},i.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},i.p="/shift-reset-stepper-js/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var f=o;a.push([0,"chunk-vendors"]),n()})({0:function(r,t,n){r.exports=n("56d7")},"034f":function(r,t,n){"use strict";var e=n("64a9"),u=n.n(e);u.a},"56d7":function(r,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var e=n("2b0e"),u=function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("div",{attrs:{id:"app"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:r.program,expression:"program"}],domProps:{value:r.program},on:{input:function(t){t.target.composing||(r.program=t.target.value)}}}),n("br"),n("input",{attrs:{type:"button",value:"parse"},on:{click:r.parse}}),n("p",[r._v(r._s(r.error))]),n("pre",[r._v(r._s(r.code))]),n("ol",r._l(r.steps,function(t,e){return n("li",{key:e,staticClass:"ocha"},[r._v("\n      "+r._s(r.printExpr(t))+"\n    ")])}),0),r.hasParsed?n("input",{attrs:{type:"button",value:"reduce"},on:{click:r.reduce}}):r._e()])},a=[],i=n("d225"),c=n("e814"),o=n.n(c),s=n("5d73"),f=n.n(s);n("55dd"),n("a481"),n("6b54");function l(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function p(r,t,n,e){this.message=r,this.expected=t,this.found=n,this.location=e,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,p)}function h(r,t){t=void 0!==t?t:{};var n,e={},u={start:Tr},a=Tr,c=";;",s=Cr(";;",!1),l=function(r,t){return new et(r,t)},h=Er("ident"),d="_",v=Cr("_",!1),y=function(){return tt},g="let",b=Cr("let",!1),m="fun",w=Cr("fun",!1),x="true",A=Cr("true",!1),j="false",C=Cr("false",!1),_=/^[a-zA-Z]/,O=_r([["a","z"],["A","Z"]],!1,!1),k=/^[a-zA-Z0-9_]/,E=_r([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),P="'",S=Cr("'",!1),F=function(r,t,n){return r+t.join("")+n.join("")},M=Er("simple-pat"),T=function(r){return r},z="=",R=Cr("=",!1),Z=function(r,t,n){var e=[],u=!0,a=!1,i=void 0;try{for(var c,o=f()(t);!(u=(c=o.next()).done);u=!0){var s=c.value;e.push(s[1])}}catch(l){a=!0,i=l}finally{try{u||null==o.return||o.return()}finally{if(a)throw i}}return new Xr(r,e,n)},J=/^[\-+]/,$=_r(["-","+"],!1,!1),N=function(r,t,n){return new Yr(t,[r,n])},U=/^[*\/]/,q=_r(["*","/"],!1,!1),B=function(r,t){var n=[],e=!0,u=!1,a=void 0;try{for(var i,c=f()(t);!(e=(i=c.next()).done);e=!0){var o=i.value;n.push(o[1])}}catch(s){u=!0,a=s}finally{try{e||null==c.return||c.return()}finally{if(u)throw a}}return new Yr(r,n)},D="(",G=Cr("(",!1),H=")",I=Cr(")",!1),K=function(r){return r},L="->",Q=Cr("->",!1),V=function(r,t){var n=[],e=!0,u=!1,a=void 0;try{for(var i,c=f()(r);!(e=(i=c.next()).done);e=!0){var o=i.value;n.push(o[1])}}catch(s){u=!0,a=s}finally{try{e||null==c.return||c.return()}finally{if(u)throw a}}return new rt(n,t)},W=Er("unit-lit"),X=function(){return nt},Y=Er("bool-lit"),rr=function(){return!0},tr=function(){return!1},nr=Er("int-lit"),er="0",ur=Cr("0",!1),ar=function(){return 0},ir="-",cr=Cr("-",!1),or=/^[1-9]/,sr=_r([["1","9"]],!1,!1),fr=/^[0-9]/,lr=_r([["0","9"]],!1,!1),pr=function(r){return o()(r.join(""),10)},hr=Er("optional-ws"),dr=Er("ws"),vr=/^[ \t\r\n]/,yr=_r([" ","\t","\r","\n"],!1,!1),gr=Er("eof"),br=Or(),mr=0,wr=[{line:1,column:1}],xr=0,Ar=[],jr=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=u[t.startRule]}function Cr(r,t){return{type:"literal",text:r,ignoreCase:t}}function _r(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function Or(){return{type:"any"}}function kr(){return{type:"end"}}function Er(r){return{type:"other",description:r}}function Pr(t){var n,e=wr[t];if(e)return e;n=t-1;while(!wr[n])n--;e=wr[n],e={line:e.line,column:e.column};while(n<t)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return wr[t]=e,e}function Sr(r,t){var n=Pr(r),e=Pr(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function Fr(r){mr<xr||(mr>xr&&(xr=mr,Ar=[]),Ar.push(r))}function Mr(r,t,n){return new p(p.buildMessage(r,t),r,t,n)}function Tr(){var r;return r=zr(),r}function zr(){var t,n,u,a,i,o,f;t=mr,n=[],u=Jr();while(u!==e)n.push(u),u=Jr();return n!==e?(u=Nr(),u!==e?(a=Lr(),a!==e?(r.substr(mr,2)===c?(i=c,mr+=2):(i=e,0===jr&&Fr(s)),i!==e?(o=Lr(),o!==e?(f=Wr(),f!==e?(t,n=l(n,u),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e),t}function Rr(){var t,n,u,a,i;if(jr++,t=mr,95===r.charCodeAt(mr)?(n=d,mr++):(n=e,0===jr&&Fr(v)),n!==e&&(t,n=y()),t=n,t===e&&(t=mr,jr++,r.substr(mr,3)===g?(n=g,mr+=3):(n=e,0===jr&&Fr(b)),jr--,n!==e?(mr=t,t=void 0):t=e,t===e&&(t=mr,jr++,r.substr(mr,3)===m?(n=m,mr+=3):(n=e,0===jr&&Fr(w)),jr--,n!==e?(mr=t,t=void 0):t=e,t===e&&(t=mr,jr++,r.substr(mr,4)===x?(n=x,mr+=4):(n=e,0===jr&&Fr(A)),jr--,n!==e?(mr=t,t=void 0):t=e,t===e&&(t=mr,jr++,r.substr(mr,5)===j?(n=j,mr+=5):(n=e,0===jr&&Fr(C)),jr--,n!==e?(mr=t,t=void 0):t=e,t===e)))))if(t=mr,_.test(r.charAt(mr))?(n=r.charAt(mr),mr++):(n=e,0===jr&&Fr(O)),n!==e){u=[],k.test(r.charAt(mr))?(a=r.charAt(mr),mr++):(a=e,0===jr&&Fr(E));while(a!==e)u.push(a),k.test(r.charAt(mr))?(a=r.charAt(mr),mr++):(a=e,0===jr&&Fr(E));if(u!==e){a=[],39===r.charCodeAt(mr)?(i=P,mr++):(i=e,0===jr&&Fr(S));while(i!==e)a.push(i),39===r.charCodeAt(mr)?(i=P,mr++):(i=e,0===jr&&Fr(S));a!==e?(t,n=F(n,u,a),t=n):(mr=t,t=e)}else mr=t,t=e}else mr=t,t=e;return jr--,t===e&&(n=e,0===jr&&Fr(h)),t}function Zr(){var r;return jr++,r=Hr(),r===e&&(r=Rr()),jr--,r===e&&(e,0===jr&&Fr(M)),r}function Jr(){var t,n,u,a,i;return t=mr,n=$r(),n!==e?(u=Lr(),u!==e?(r.substr(mr,2)===c?(a=c,mr+=2):(a=e,0===jr&&Fr(s)),a!==e?(i=Lr(),i!==e?(t,n=T(n),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e),t}function $r(){var t,n,u,a,i,c,o,s,f;if(t=mr,r.substr(mr,3)===g?(n=g,mr+=3):(n=e,0===jr&&Fr(b)),n!==e)if(u=Qr(),u!==e)if(a=Rr(),a!==e){if(i=[],c=mr,o=Qr(),o!==e?(s=Zr(),s!==e?(o=[o,s],c=o):(mr=c,c=e)):(mr=c,c=e),c!==e)while(c!==e)i.push(c),c=mr,o=Qr(),o!==e?(s=Zr(),s!==e?(o=[o,s],c=o):(mr=c,c=e)):(mr=c,c=e);else i=e;i!==e?(c=Lr(),c!==e?(61===r.charCodeAt(mr)?(o=z,mr++):(o=e,0===jr&&Fr(R)),o!==e?(s=Lr(),s!==e?(f=Nr(),f!==e?(t,n=Z(a,i,f),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)}else mr=t,t=e;else mr=t,t=e;else mr=t,t=e;return t}function Nr(){var t,n,u,a,i,c;return t=mr,n=Ur(),n!==e?(u=Lr(),u!==e?(J.test(r.charAt(mr))?(a=r.charAt(mr),mr++):(a=e,0===jr&&Fr($)),a!==e?(i=Lr(),i!==e?(c=Nr(),c!==e?(t,n=N(n,a,c),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e),t===e&&(t=Ur()),t}function Ur(){var t,n,u,a,i,c;return t=mr,n=qr(),n!==e?(u=Lr(),u!==e?(U.test(r.charAt(mr))?(a=r.charAt(mr),mr++):(a=e,0===jr&&Fr(q)),a!==e?(i=Lr(),i!==e?(c=Ur(),c!==e?(t,n=N(n,a,c),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e),t===e&&(t=qr()),t}function qr(){var r,t,n,u,a,i;if(r=mr,t=Br(),t!==e){if(n=[],u=mr,a=Qr(),a!==e?(i=Br(),i!==e?(a=[a,i],u=a):(mr=u,u=e)):(mr=u,u=e),u!==e)while(u!==e)n.push(u),u=mr,a=Qr(),a!==e?(i=Br(),i!==e?(a=[a,i],u=a):(mr=u,u=e)):(mr=u,u=e);else n=e;n!==e?(r,t=B(t,n),r=t):(mr=r,r=e)}else mr=r,r=e;return r===e&&(r=Br()),r}function Br(){var t,n,u,a,i,c;return t=mr,40===r.charCodeAt(mr)?(n=D,mr++):(n=e,0===jr&&Fr(G)),n!==e?(u=Lr(),u!==e?(a=Nr(),a!==e?(i=Lr(),i!==e?(41===r.charCodeAt(mr)?(c=H,mr++):(c=e,0===jr&&Fr(I)),c!==e?(t,n=K(a),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e),t===e&&(t=Dr()),t}function Dr(){var r;return r=Hr(),r===e&&(r=Ir(),r===e&&(r=Kr(),r===e&&(r=Gr(),r===e&&(r=Rr())))),r}function Gr(){var t,n,u,a,i,c,o;if(t=mr,r.substr(mr,3)===m?(n=m,mr+=3):(n=e,0===jr&&Fr(w)),n!==e){if(u=[],a=mr,i=Qr(),i!==e?(c=Zr(),c!==e?(i=[i,c],a=i):(mr=a,a=e)):(mr=a,a=e),a!==e)while(a!==e)u.push(a),a=mr,i=Qr(),i!==e?(c=Zr(),c!==e?(i=[i,c],a=i):(mr=a,a=e)):(mr=a,a=e);else u=e;u!==e?(a=Lr(),a!==e?(r.substr(mr,2)===L?(i=L,mr+=2):(i=e,0===jr&&Fr(Q)),i!==e?(c=Lr(),c!==e?(o=Nr(),o!==e?(t,n=V(u,o),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e)}else mr=t,t=e;return t}function Hr(){var t,n,u,a;return jr++,t=mr,40===r.charCodeAt(mr)?(n=D,mr++):(n=e,0===jr&&Fr(G)),n!==e?(u=Lr(),u!==e?(41===r.charCodeAt(mr)?(a=H,mr++):(a=e,0===jr&&Fr(I)),a!==e?(t,n=X(),t=n):(mr=t,t=e)):(mr=t,t=e)):(mr=t,t=e),jr--,t===e&&(n=e,0===jr&&Fr(W)),t}function Ir(){var t,n;return jr++,t=mr,r.substr(mr,4)===x?(n=x,mr+=4):(n=e,0===jr&&Fr(A)),n!==e&&(t,n=rr()),t=n,t===e&&(t=mr,r.substr(mr,5)===j?(n=j,mr+=5):(n=e,0===jr&&Fr(C)),n!==e&&(t,n=tr()),t=n),jr--,t===e&&(n=e,0===jr&&Fr(Y)),t}function Kr(){var t,n,u,a,i,c;if(jr++,t=mr,48===r.charCodeAt(mr)?(n=er,mr++):(n=e,0===jr&&Fr(ur)),n!==e&&(t,n=ar()),t=n,t===e){if(t=mr,n=mr,45===r.charCodeAt(mr)?(u=ir,mr++):(u=e,0===jr&&Fr(cr)),u===e&&(u=null),u!==e)if(or.test(r.charAt(mr))?(a=r.charAt(mr),mr++):(a=e,0===jr&&Fr(sr)),a!==e){i=[],fr.test(r.charAt(mr))?(c=r.charAt(mr),mr++):(c=e,0===jr&&Fr(lr));while(c!==e)i.push(c),fr.test(r.charAt(mr))?(c=r.charAt(mr),mr++):(c=e,0===jr&&Fr(lr));i!==e?(u=[u,a,i],n=u):(mr=n,n=e)}else mr=n,n=e;else mr=n,n=e;n!==e&&(t,n=pr(n)),t=n}return jr--,t===e&&(n=e,0===jr&&Fr(nr)),t}function Lr(){var r,t;jr++,r=[],t=Vr();while(t!==e)r.push(t),t=Vr();return jr--,r===e&&(t=e,0===jr&&Fr(hr)),r}function Qr(){var r,t;if(jr++,r=[],t=Vr(),t!==e)while(t!==e)r.push(t),t=Vr();else r=e;return jr--,r===e&&(t=e,0===jr&&Fr(dr)),r}function Vr(){var t;return vr.test(r.charAt(mr))?(t=r.charAt(mr),mr++):(t=e,0===jr&&Fr(yr)),t}function Wr(){var t,n;return jr++,t=mr,jr++,r.length>mr?(n=r.charAt(mr),mr++):(n=e,0===jr&&Fr(br)),jr--,n===e?t=void 0:(mr=t,t=e),jr--,t===e&&(n=e,0===jr&&Fr(gr)),t}var Xr=function r(t,n,e){Object(i["a"])(this,r),this.type="function-definition",this.ident=t,this.params=n,this.body=e},Yr=function r(t,n){Object(i["a"])(this,r),this.type="function-application",this.f=t,this.args=n},rt=function r(t,n){Object(i["a"])(this,r),this.type="lambda-expr",this.params=t,this.body=n},tt="ast-wildcard",nt="ast-unit",et=function r(t,n){Object(i["a"])(this,r),this.type="program",this.defs=t,this.expr=n};if(n=a(),n!==e&&mr===r.length)return n;throw n!==e&&mr<r.length&&Fr(kr()),Mr(Ar,xr<r.length?r.charAt(xr):null,xr<r.length?Sr(xr,xr+1):Sr(xr,xr))}function d(r,t){return h(r,t)}function v(r){r.expr;var t=[],n=!0,e=!1,u=void 0;try{for(var a,i=f()(r.defs);!(n=(a=i.next()).done);n=!0){var c=a.value;t.push(y(c))}}catch(o){e=!0,u=o}finally{try{n||null==i.return||i.return()}finally{if(e)throw u}}return t.push(g(r.expr)),t.join(";;\n\n")}function y(r){return"let "+r.ident+" "+m(r.params)+" =\n  "+g(r.body)}function g(r){switch(r.type){case"function-application":switch(r.f){case"+":case"-":case"*":case"/":return g(r.args[0])+" "+r.f+" "+g(r.args[1]);default:return r.f?r.f.type?"("+g(r.f)+") "+w(r.args):g(r.f)+" "+w(r.args):"oops!"}case"lambda-expr":return"fun "+m(r.params)+" -> "+g(r.body);case void 0:switch(r){case"ast-unit":return"()";case"ast-wildcard":return"_";default:return r+""}}throw new Error("unsupported type: "+r.type)}function b(r){switch(r){case"ast-unit":return"()";case"ast-wildcard":return"_";default:return r}}function m(r){var t=[],n=!0,e=!1,u=void 0;try{for(var a,i=f()(r);!(n=(a=i.next()).done);n=!0){var c=a.value;t.push(b(c))}}catch(o){e=!0,u=o}finally{try{n||null==i.return||i.return()}finally{if(e)throw u}}return t.join(" ")}function w(r){var t=[],n=!0,e=!1,u=void 0;try{for(var a,i=f()(r);!(n=(a=i.next()).done);n=!0){var c=a.value;switch(c.type){case"lambda-expr":case"function-application":t.push("("+g(c)+")");break;default:t.push(g(c));break}}}catch(o){e=!0,u=o}finally{try{n||null==i.return||i.return()}finally{if(e)throw u}}return t.join(" ")}l(p,Error),p.buildMessage=function(r,t){var n={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,n="";for(t=0;t<r.parts.length;t++)n+=r.parts[t]instanceof Array?a(r.parts[t][0])+"-"+a(r.parts[t][1]):a(r.parts[t]);return"["+(r.inverted?"^":"")+n+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function a(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function i(r){return n[r.type](r)}function c(r){var t,n,e=new Array(r.length);for(t=0;t<r.length;t++)e[t]=i(r[t]);if(e.sort(),e.length>0){for(t=1,n=1;t<e.length;t++)e[t-1]!==e[t]&&(e[n]=e[t],n++);e.length=n}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}function o(r){return r?'"'+u(r)+'"':"end of input"}return"Expected "+c(r)+" but "+o(t)+" found."};var x=n("f499"),A=n.n(x),j=n("768b"),C=(n("ac6a"),n("75fc")),_=n("ab8c"),O=n.n(_),k=n("2d7d"),E=n.n(k),P=n("01c8"),S=n("b0b4");function F(){return"ast-unit"}function M(r,t){return{type:"lambda-expr",params:r,body:t}}function T(r,t){return{type:"function-application",f:r,args:t}}function z(r,t){return t||(t=[]),T("reset",[M([F()],r)].concat(Object(C["a"])(t)))}var R=0;function Z(){return"v"+R++}var J=function(){function r(){Object(i["a"])(this,r),this.outer=function(r){return r},this.current=function(r){return r}}return Object(S["a"])(r,[{key:"clone",value:function(){var t=new r;return t.outer=this.outer,t.current=this.current,t}},{key:"setCurrent",value:function(r){return this.current=function(t){return r},this}}]),r}();function $(r,t){R=0;var n=q(r,t,new J),e=n.outer(n.current(null));return e}function N(r){return void 0===r.type||"lambda-expr"===r.type}function U(r){switch(r){case"+":case"-":case"*":case"/":return!0;default:return"lambda-expr"===r.type}}function q(r,t,n){if(!t.type)return n.current=function(r){return t},n;switch(t.type){case"function-application":switch(t.f){case"reset":var e=B(t.args);if(-1===e||0===e)return D(r,t.args[0].body,t.args.slice(1),n);var u=n.current;return n.current=function(r){var n=t.args.map(function(r){return r});return n[e]=r,u(T(t.f,n))},q(r,t.args[e],n);case"shift":return G(r,t.args[0],n);default:var a=B(t.args);if(-1===a){if(U(t.f))return H(r,t.f,t.args,n);if("function-application"===t.f.type){var i=q(r,t.f,n.clone());return n.current=function(r){return T(i.outer(i.current(r)),t.args)},n}return I(r,t.f,t.args,n)}var c=n.current;return n.current=function(r){var n=t.args.map(function(r){return r});return n[a]=r,c(T(t.f,n))},q(r,t.args[a],n)}case"lambda-expr":return n.current=function(r){return t},n;default:throw new Error("not implemented yet.")}}function B(r){for(var t=r.length-1;t>=0;t--)if(!N(r[t]))return t;return-1}function D(r,t,n,e){if(!N(t)){var u=e.clone(),a=q(r,t,new J);return e.current=function(r){return a.outer(a.current(r))},e.outer=function(r){return u.outer(u.current(z(r,n)))},e}var i=e.current(t);switch(i.type){case"lambda-expr":return 0!==n.length?e.setCurrent(T(i,n)):e.setCurrent(i);default:return e.setCurrent(i)}}function G(r,t,n){var e=Z();return n.setCurrent(T(t,[M([e],z(n.current(e)))]))}function H(r,t,n,e){switch(t){case"+":return e.setCurrent(e.current(n[0]+n[1]));case"-":return e.setCurrent(e.current(n[0]-n[1]));case"*":return e.setCurrent(e.current(n[0]*n[1]));case"/":return e.setCurrent(e.current(n[0]/n[1]));default:if(1==t.params.length){var u=L(t.body,t.params[0],n[0]);return 1!=n.length?e.setCurrent(T(e.current(u),n.slice(1))):e.setCurrent(e.current(u))}var a=Object(P["a"])(t.params),i=a[0],c=a.slice(1),o=Object(P["a"])(n),s=o[0],f=o.slice(1),l=M([i],T(M(c,t.body),f));return H(r,l,[s],e)}}function I(r,t,n,e){var u=new E.a,a=!0,i=!1,c=void 0;try{for(var o,s=f()(r);!(a=(o=s.next()).done);a=!0){var l=o.value;u.set(l.ident,l)}}catch(v){i=!0,c=v}finally{try{a||null==s.return||s.return()}finally{if(i)throw c}}for(var p=u.get(t),h=p.params.map(function(r){return r}),d=0;d<h.length;d++)u.set(p.params[d],h[d]);return e.setCurrent(e.current(T(M(h,p.body),n)))}function K(r){return"number"===typeof r&&O()(r)}function L(r,t,n){var e=new E.a([[t,n]]);return Q(e,r)}function Q(r,t){if(K(t))return t;var n=r.get(t);if(void 0!==n)return n;if(!t.type)return t;switch(t.type){case"function-application":var e=t.args.map(function(t){return Q(V(r),t)}),u=Q(V(r),t.f);return T(u,e);case"lambda-expr":var a=V(r),i=!0,c=!1,o=void 0;try{for(var s,l=f()(t.params);!(i=(s=l.next()).done);i=!0){var p=s.value;a.delete(p)}}catch(d){c=!0,o=d}finally{try{i||null==l.return||l.return()}finally{if(c)throw o}}var h=Q(a,t.body);return M(t.params,h)}throw new Error("not implemented yet. expr="+g(t)+", varTable="+W(r))}function V(r){return new E.a(Object(C["a"])(r.entries()))}function W(r){return"{"+Object(C["a"])(r.entries()).map(function(r){var t=Object(j["a"])(r,2),n=t[0],e=t[1];return n+":"+A()(e)}).join(", ")+"}"}var X={name:"app",components:{},data:function(){return{program:"let get () = shift (fun k -> fun state -> k state state);;\nlet return result = fun _ -> result;;\nlet run_state thunk init = reset (fun () -> return (thunk ())) init;;\nrun_state (fun () -> get () + get ()) 3;;",error:"",code:"",steps:[],parsed:""}},computed:{hasParsed:function(){return""!==this.code}},methods:{parse:function(){if(this.program)try{this.error="",this.parsed=d(this.program,{}),this.code=v(this.parsed),this.steps=[this.parsed.expr]}catch(r){this.error=r,this.parsed="",this.code="",this.steps=[]}},reduce:function(){if(0!=this.steps.length){var r=this.steps[this.steps.length-1],t=$(this.parsed.defs,r);this.steps.push(t)}},printExpr:function(r){return g(r)}}},Y=X,rr=(n("034f"),n("2877")),tr=Object(rr["a"])(Y,u,a,!1,null,null,null),nr=tr.exports;e["a"].config.productionTip=!1,new e["a"]({render:function(r){return r(nr)}}).$mount("#app")},"64a9":function(r,t,n){}});
//# sourceMappingURL=app.85a0a8b1.js.map